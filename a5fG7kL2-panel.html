<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Access Denied</title>
    <style>
        body {
            background: #1a1a2e;
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        .login-card {
            background: #162447;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
            width: 350px;
        }
        input {
            width: 100%;
            padding: 12px;
            margin: 15px 0;
            border-radius: 8px;
            border: none;
            background: #2a2a4a;
            color: white;
            box-sizing: border-box;
        }
        input:focus {
            outline: 2px solid #e94560;
        }
        button {
            width: 100%;
            padding: 12px;
            background: #e94560;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }
        button:hover {
            background: #d43f57;
        }
        .error {
            color: #ff6b6b;
            margin-top: 15px;
            min-height: 20px;
        }
        .success {
            color: #4ecdc4;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="login-card">
        <h2>üîê Admin Access</h2>
        <p>Enter password to continue</p>
        <input type="password" id="password-input" placeholder="Password" autocomplete="off" onkeypress="handleKeyPress(event)">
        <button onclick="attemptLogin()">Login</button>
        <div id="message" class="error"></div>
    </div>

    <script>
        const ADMIN_PASSWORD_HASH = "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"; // SHA-256 –æ—Ç "PurpleTiger$Runs@Midnight42!"

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–µ—Å—Å–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            checkExistingSession();
        });

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                attemptLogin();
            }
        }

        async function simpleHash(str) {
            const buffer = new TextEncoder().encode(str);
            const hashBuffer = await crypto.subtle.digest('SHA-256', buffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        async function attemptLogin() {
            const passwordInput = document.getElementById('password-input');
            const messageDiv = document.getElementById('message');
            const password = passwordInput.value;
            
            if (!password) {
                messageDiv.textContent = "Please enter a password.";
                messageDiv.className = 'error';
                return;
            }

            try {
                const hash = await simpleHash(password);
                if (hash === ADMIN_PASSWORD_HASH) {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è –≤—Ö–æ–¥–∞ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ —Å–µ—Å—Å–∏–∏
                    localStorage.setItem('adminSession', Date.now());
                    localStorage.setItem('isAdmin', 'true');
                    
                    messageDiv.textContent = "Login successful! Loading admin panel...";
                    messageDiv.className = 'success';
                    
                    // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ
                    setTimeout(loadAdminPanel, 1000);
                } else {
                    messageDiv.textContent = "Invalid password.";
                    messageDiv.className = 'error';
                    passwordInput.value = '';
                    console.log("[ADMIN] Failed login attempt at", new Date().toLocaleString());
                }
            } catch (error) {
                messageDiv.textContent = "An error occurred during authentication.";
                messageDiv.className = 'error';
                console.error("Login error:", error);
            }
        }

        function checkExistingSession() {
            const sessionTime = localStorage.getItem('adminSession');
            const isAdmin = localStorage.getItem('isAdmin');
            
            if (sessionTime && isAdmin === 'true') {
                const sessionAge = Date.now() - parseInt(sessionTime);
                const thirtyMinutes = 30 * 60 * 1000;
                
                if (sessionAge < thirtyMinutes) {
                    // –°–µ—Å—Å–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞, –∑–∞–≥—Ä—É–∂–∞–µ–º –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
                    loadAdminPanel();
                } else {
                    // –°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞
                    logout();
                }
            }
        }

        function loadAdminPanel() {
            document.querySelector('.login-card').innerHTML = `
                <h2>üõ†Ô∏è Welcome, Admin</h2>
                <p>You now have full control over the site.</p>
                <button onclick="logout()">Logout</button>
                <hr style="margin: 20px 0; border-color: #4a4a6a;">
                <div style="text-align: left; color: #1abc9c;">
                    <h3>üîß Features:</h3>
                    <ul>
                        <li>Edit tool names & descriptions</li>
                        <li>Manage translations (RU/EN)</li>
                        <li>Update FAQ, ToS, Privacy</li>
                        <li>Export/Import config</li>
                    </ul>
                </div>
                <div style="margin-top: 20px; font-size: 12px; color: #6c757d;">
                    Session started: ${new Date(parseInt(localStorage.getItem('adminSession'))).toLocaleString()}
                </div>
            `;
        }

        function logout() {
            localStorage.removeItem('adminSession');
            localStorage.removeItem('isAdmin');
            location.reload();
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Å—Å–∏—é –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
        setInterval(() => {
            const sessionTime = localStorage.getItem('adminSession');
            if (sessionTime) {
                const sessionAge = Date.now() - parseInt(sessionTime);
                const thirtyMinutes = 30 * 60 * 1000;
                
                if (sessionAge > thirtyMinutes) {
                    logout();
                }
            }
        }, 60000);
    </script>
</body>
</html>
